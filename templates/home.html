{% extends 'base.html' %}

{% block content %}
<p>
    {% if user.is_authenticated %}
     Hello, {{ user.username }}
    {% else %}
    {% endif %}
</p>

{% if user.is_authenticated %}
    <hr />
    <form action="{% url 'users:logout' %}" method="post">
        {% csrf_token %}
        <button name="submit">Log out</button>
    </form>
{% endif %}

<h2>Welcome to the home page!</h2> 
<h3>Here events available to view and registration for visitors</h3>
<h3>New event create available for creators.</h3>

{% if user.is_authenticated and user.is_creator %}
  <a href="{% url 'events:new_event' %}">Add a new event</a>
{% endif %}

<h4>Events:</h4>
<ul>
  {% for event in events %}
    <li>
      <a href="{% url 'events:event_details' event.id %}">{{ event.title }}</a>
    </li>
  {% empty %}
    <li>No events have been added yet.</li>
  {% endfor %}
</ul>
{% if form.errors %}
  <ul class="errorlist">
    {% for field in form %}
      {% for error in field.errors %}
        <li>{{ field.label }}: {{ error }}</li>
      {% endfor %}
    {% endfor %}
    {% for error in form.non_field_errors %}
      <li>{{ error }}</li>
    {% endfor %}
  </ul>
{% endif %}

{% endblock content %}